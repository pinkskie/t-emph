"use strict";(self["webpackChunkhard_js"]=self["webpackChunkhard_js"]||[]).push([[140],{8686:function(e,s,r){r.d(s,{Z:function(){return F}});var a=r(6252),t=r(9963),i=r(3577);const n={class:"Upsert fullPage"},u={class:"form-title"},o={class:"form-inputs"},p={class:"form-inputs-item"},l={key:0,class:"error"},m={class:"form-inputs-item"},d={key:0,class:"error"},c={class:"form-inputs-item"},v={key:0,class:"error"},w={class:"form-inputs-item"},f={key:0,class:"error"},h={class:"form-inputs-item"},$={key:0,class:"error"},_={class:"btn",type:"submit"};function g(e,s,r,g,U,y){const N=(0,a.up)("TextField");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("form",{class:"form",onSubmit:s[5]||(s[5]=(0,t.iM)(((...e)=>y.submitForm&&y.submitForm(...e)),["prevent"]))},[(0,a._)("div",u,[(0,a._)("h1",null,(0,i.zw)(g.isCreate?"Create new user":"Update user"),1)]),(0,a._)("div",o,[(0,a._)("div",p,[(0,a.Wm)(N,{type:"text",input:g.values.username,"onUpdate:input":s[0]||(s[0]=e=>g.values.username=e),placeholder:"Username"},null,8,["input"]),g.v$.username.$error?((0,a.wg)(),(0,a.iD)("span",l,(0,i.zw)(g.v$.username.$errors[0]?.$message),1)):(0,a.kq)("",!0)]),(0,a._)("div",m,[(0,a.Wm)(N,{type:"text",input:g.values.firstName,"onUpdate:input":s[1]||(s[1]=e=>g.values.firstName=e),placeholder:"FirstName"},null,8,["input"]),g.v$.firstName.$error?((0,a.wg)(),(0,a.iD)("span",d,(0,i.zw)(g.v$.firstName.$errors[0]?.$message),1)):(0,a.kq)("",!0)]),(0,a._)("div",c,[(0,a.Wm)(N,{type:"text",input:g.values.lastName,"onUpdate:input":s[2]||(s[2]=e=>g.values.lastName=e),placeholder:"LastName"},null,8,["input"]),g.v$.lastName.$error?((0,a.wg)(),(0,a.iD)("span",v,(0,i.zw)(g.v$.lastName.$errors[0]?.$message),1)):(0,a.kq)("",!0)]),(0,a._)("div",w,[(0,a.Wm)(N,{type:"password",input:g.values.password.password,"onUpdate:input":s[3]||(s[3]=e=>g.values.password.password=e),placeholder:"Password"},null,8,["input"]),g.v$.password.$error?((0,a.wg)(),(0,a.iD)("span",f,(0,i.zw)(g.v$.password.password.$errors[0]?.$message),1)):(0,a.kq)("",!0)]),(0,a._)("div",h,[(0,a.Wm)(N,{type:"password",input:g.values.password.confirm,"onUpdate:input":s[4]||(s[4]=e=>g.values.password.confirm=e),placeholder:"Confirm password"},null,8,["input"]),g.v$.password.confirm.$error?((0,a.wg)(),(0,a.iD)("span",$,(0,i.zw)(g.v$.password.confirm.$errors[0]?.$message),1)):(0,a.kq)("",!0)]),(0,a._)("button",_,(0,i.zw)(g.isCreate?"Create":"Update"),1)])],32)])}var U=r(2262),y=r(2201),N=r(4028),k=r(5293),q=r(2587),C={name:"UpsertForm",emits:["create","update"],components:{TextField:k.Z},props:{user:{type:Object,default:null}},setup(e){const s=(0,y.tv)(),r=(0,y.yj)(),t=r.params.id,i=(0,U.iH)(!1),n=q.BM.regex(/^(?=.*[A-Z])(?=.*\d).{8,}$/),u=q.BM.regex(/^[A-Za-z0-9.@+-_]+$/),o=(0,U.qj)({username:e.user?.username,password:{password:"",confirm:""},firstName:e.user?.first_name,lastName:e.user?.first_name}),p=(0,U.Fl)((()=>({username:{containUsernameRequirement:q.BM.withMessage("150 characters or fewer. Letters, digits and @/./+/-/_",u),required:q.C1,maxValue:(0,q.BS)(150),minLength:(0,q.Ei)(4)},firstName:{required:q.C1,maxValue:(0,q.BS)(150)},lastName:{required:q.C1,maxValue:(0,q.BS)(150)},password:{password:{required:q.C1,containsPasswordRequirement:q.BM.withMessage("Password should be 8+ characters, 1 capital, 1 numeric",n)},confirm:{required:q.C1,sameAs:(0,q.sH)(o.password.password)}}}))),l=(0,N.ZP)(p,o);return(0,a.bv)((()=>"CreateUser"===r.name?i.value=!0:null)),{values:o,v$:l,isCreate:i,router:s,id:t}},methods:{submitForm(){this.v$.$validate(),0===this.v$.$errors.length&&(this.id?this.$emit("update",this.id,{username:this.values.username,first_name:this.values.firstName,last_name:this.values.lastName,password:this.values.password.password,is_active:!0,is_superuser:!1,last_login:Date.now()}):this.$emit("create",{username:this.values.username,first_name:this.values.firstName,last_name:this.values.lastName,password:this.values.password.password,is_active:!0,is_superuser:!1,last_login:Date.now()}))}}},b=r(3744);const x=(0,b.Z)(C,[["render",g]]);var F=x},596:function(e,s,r){r.r(s),r.d(s,{default:function(){return d}});var a=r(6252);function t(e,s,r,t,i,n){const u=(0,a.up)("UpsertForm");return t.user?((0,a.wg)(),(0,a.j4)(u,{key:0,onUpdate:t.updateUser,user:t.user},null,8,["onUpdate","user"])):(0,a.kq)("",!0)}r(7658);var i=r(2262),n=r(8686),u=r(1006),o=r(2201),p={name:"UpdateUser",components:{UpsertForm:n.Z},setup(){const e=(0,o.yj)(),s=(0,o.tv)(),r=(0,i.iH)(e.params.id),t=(0,i.iH)(null),n=async(e,r)=>{try{const a=await u.Z.updateUser(e,r);a&&s.push("/")}catch(a){console.error(a)}};return(0,a.bv)((async()=>{r.value&&(t.value=await u.Z.getUserById(r.value))})),{user:t,updateUser:n}}},l=r(3744);const m=(0,l.Z)(p,[["render",t]]);var d=m}}]);
//# sourceMappingURL=140.6ceb041f.js.map